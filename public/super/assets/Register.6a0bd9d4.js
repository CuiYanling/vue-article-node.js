import{_ as U,r as E,a as q,u as A,E as I,o as C,c as B,d as s,w as o,e as r,f as m,A as V,g as f,p as z,h as F,i as c}from"./index.1bb11c7d.js";import{E as N,a as $}from"./el-input.424f7e03.js";import{E as j}from"./el-row.ba8ace8c.js";import{E as G}from"./el-col.679ae418.js";import{E as L}from"./el-link.93e2a571.js";import{E as M,a as T}from"./el-form-item.18bec942.js";import{E as D}from"./el-checkbox.46989ebd.js";import{E as H,a as J}from"./el-radio.892a4d3a.js";const v=p=>(z("data-v-a62d4075"),p=p(),F(),p),K={class:"bg"},O=v(()=>c("div",{class:"card-header"},[c("span",null,"\u6CE8\u518C")],-1)),Q=m("\u7537"),W=m("\u5973"),X=v(()=>c("span",{style:{"margin-left":"-15px"}},"\u540C\u610F\u672C\u7AD9\u7528\u6237\u534F\u8BAE\uFF08\u6709\u94FE\u63A5\uFF09",-1)),Y=m("\u6CE8\u518C"),Z=m("\u767B\u5F55\u8D26\u6237"),ee=m("\u5FD8\u8BB0\u5BC6\u7801\uFF1F"),se={__name:"Register",setup(p){let l=E({username:"",password:"",checkpass:"",fullname:"",sex:"\u7537",tel:"",isAgree:!1});const _=q(),x=E({username:[{validator:async(u,e,a)=>{if(e===""){a(new Error("\u8BF7\u8F93\u5165\u7528\u6237\u540D!!!"));return}let{msg:n,status:d}=await V.checkusername({username:l.username});if(console.log(n,d),!d){a(new Error("\u7528\u6237\u5DF2\u88AB\u6CE8\u518C!"));return}a()},trigger:"blur"},{min:3,max:20,required:!0,message:"\u8D26\u6237\u957F\u5EA6\u8981\u6C42\u57283-20\u4E4B\u95F4",trigger:"blur"}],password:[{validator:(u,e,a)=>{if(e===""){a(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"));return}if(/\d{3,}/.test(e)||a(new Error("\u5BC6\u7801\u81F3\u5C11\u4E09\u4F4D\u6570\u5B57\uFF01")),l.checkPass!==""){if(!_.value)return;_.value.validateField("checkPass",()=>null)}a()},required:!0,trigger:"blur"}],checkpass:[{validator:(u,e,a)=>{if(e===""){a(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01"));return}if(e!==l.password){a(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u540C\uFF01"));return}a()},required:!0,trigger:"blur"}],fullname:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D!",trigger:"blur"},{min:1,max:10,message:"\u59D3\u540D\u957F\u5EA6\u8981\u6C42\u57281-10\u4E4B\u95F4",trigger:"blur"}],sex:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B!",trigger:"change"}],tel:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801!",trigger:"blur"},{pattern:/^1(34[0-8]|705|(3[5-9]|5[0127-9]|8[23478]|78)\d)\d{7}$/,message:"\u624B\u673A\u53F7\u7801\u4E0D\u7B26\u5408\u89C4\u5219\uFF01",trigger:"blur"}]});let b=A();function h(u){u.validate(async(e,a)=>{if(console.log(e),e){let{status:n,msg:d,data:i}=await V.register({username:l.username,password:l.password,fullname:l.fullname,sex:l.sex,tel:l.tel});n?(sessionStorage.id=i.id,sessionStorage.role=i.role,sessionStorage.token=i.token,f.success(d),b.push("/admin/list")):f.error(d)}else console.log("\u6821\u9A8C\u5931\u8D25(\u5B57\u6BB5)",a),f.error("\u6CE8\u518C\u5931\u8D25\uFF01\uFF01\uFF01")})}return(u,e)=>{const a=N,n=M,d=H,i=J,k=D,y=I,R=T,g=L,w=G,P=j,S=$;return C(),B("div",K,[s(S,{class:"form-card"},{header:o(()=>[O]),default:o(()=>[s(R,{ref_key:"formRef",ref:_,model:r(l),rules:x,"label-width":"80px"},{default:o(()=>[s(n,{label:"\u8D26\u53F7",prop:"username"},{default:o(()=>[s(a,{modelValue:r(l).username,"onUpdate:modelValue":e[0]||(e[0]=t=>r(l).username=t)},null,8,["modelValue"])]),_:1}),s(n,{label:"\u5BC6\u7801",prop:"password"},{default:o(()=>[s(a,{modelValue:r(l).password,"onUpdate:modelValue":e[1]||(e[1]=t=>r(l).password=t),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1}),s(n,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"checkpass"},{default:o(()=>[s(a,{modelValue:r(l).checkpass,"onUpdate:modelValue":e[2]||(e[2]=t=>r(l).checkpass=t),"show-password":"",type:"password"},null,8,["modelValue"])]),_:1}),s(n,{label:"\u59D3\u540D",prop:"fullname"},{default:o(()=>[s(a,{modelValue:r(l).fullname,"onUpdate:modelValue":e[3]||(e[3]=t=>r(l).fullname=t)},null,8,["modelValue"])]),_:1}),s(n,{label:"\u6027\u522B",prop:"sex"},{default:o(()=>[s(i,{modelValue:r(l).sex,"onUpdate:modelValue":e[4]||(e[4]=t=>r(l).sex=t),class:"ml-4"},{default:o(()=>[s(d,{label:"\u7537",size:"large"},{default:o(()=>[Q]),_:1}),s(d,{label:"\u5973",size:"large"},{default:o(()=>[W]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(n,{label:"\u624B\u673A",prop:"tel"},{default:o(()=>[s(a,{modelValue:r(l).tel,"onUpdate:modelValue":e[5]||(e[5]=t=>r(l).tel=t)},null,8,["modelValue"])]),_:1}),s(n,{prop:"checked1"},{default:o(()=>[s(k,{modelValue:r(l).isAgree,"onUpdate:modelValue":e[6]||(e[6]=t=>r(l).isAgree=t),size:"large"},null,8,["modelValue"]),X]),_:1}),s(n,null,{default:o(()=>[s(y,{onClick:e[7]||(e[7]=t=>h(_.value)),disabled:!r(l).isAgree,type:"primary"},{default:o(()=>[Y]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"]),s(P,{justify:"space-between"},{default:o(()=>[s(w,{span:5},{default:o(()=>[s(g,{href:"/#/login",type:"info"},{default:o(()=>[Z]),_:1})]),_:1}),s(w,{span:6},{default:o(()=>[s(g,{type:"info"},{default:o(()=>[ee]),_:1})]),_:1})]),_:1})]),_:1})])}}},_e=U(se,[["__scopeId","data-v-a62d4075"]]);export{_e as default};
