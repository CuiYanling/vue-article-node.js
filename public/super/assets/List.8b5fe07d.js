import{a as N,aP as m,Y as $,E as L,aQ as k,o as D,W as P,w as a,g as s,d as e,f as d,a2 as V,e as M,i as f}from"./index.1bb11c7d.js";import{a as R}from"./el-input.424f7e03.js";import{E as S,a as I}from"./el-table-column.1a899da9.js";import"./el-checkbox.46989ebd.js";import"./el-scrollbar.1f62721a.js";import{E as Q}from"./el-row.ba8ace8c.js";import{E as W}from"./el-link.93e2a571.js";/* empty css                */import{E as h}from"./el-message-box.01abd863.js";import"./el-overlay.1f7d1ab9.js";import{N as _}from"./notice.58bf0b82.js";import"./index.08af8a2a.js";import"./validator.0d104d86.js";import"./scroll.292c786e.js";const Y=f("div",{class:"card-header"},[f("span",null,"\u516C\u544A\u5217\u8868")],-1),j=d(" \u7F16\u8F91 "),q=d(" \u5220\u9664 "),le={__name:"List",setup(z){let l=N([]);async function u(){let{status:c,msg:o,data:t,total:p}=await _.noticelist();console.log(t),c?l.value=t:s.error(o)}u();function w(c,o,t,p){h.confirm("\u6B64\u64CD\u4F5C\u5C06\u9876\u7F6E\u8BE5\u516C\u544A\uFF0C\u662F\u5426\u7EE7\u7EED?",{type:"warning",cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u8BA4"}).then(async()=>{if(o){o=0,console.log(o);let{status:i,msg:n}=await _.top({id:c,is_sticky:o});i?(s.success(n),o=0,l.value.unshift(l.value[t]),l.value.splice(t+1,1),u()):s.error(n)}else{o=1,console.log(o);let{status:i,msg:n}=await _.top({id:c,is_sticky:o});i?(s.success(n),o=1,l.value.unshift(l.value[t]),l.value.splice(t+1,1),u()):s.error(n)}}).catch(()=>{s("\uFF08\u53D6\u6D88\uFF09\u9876\u7F6E\u5931\u8D25!")})}function E(c,o){h.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u516C\u544A\uFF0C\u662F\u5426\u7EE7\u7EED?",{type:"warning",cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u8BA4"}).then(async()=>{let{status:t,msg:p}=await _.remove({id:c});t?(s.success(p),l.value.splice(o,1)):s.error(p)}).catch(()=>{s("\u53D6\u6D88\u6210\u529F\uFF01")})}return(c,o)=>{const t=S,p=m("EditPen"),i=$,n=L,g=W,v=m("Top"),b=k,T=m("Delete"),x=Q,B=I,C=R;return D(),P(C,{class:"box-card"},{header:a(()=>[Y]),default:a(()=>[e(B,{data:M(l),style:{width:"100%"}},{default:a(()=>[e(t,{prop:"id",label:"#"}),e(t,{prop:"title",label:"\u6807\u9898"}),e(t,{prop:"create_time",label:"\u53D1\u5E03\u65E5\u671F"}),e(t,{prop:"update_time",label:"\u66F4\u65B0\u65E5\u671F"}),e(t,{prop:"operation",label:"\u64CD\u4F5C",width:"300"},{default:a(r=>[e(x,null,{default:a(()=>[e(b,null,{default:a(()=>[e(g,{href:`/#/notice/listedit/${r.row.id}`},{default:a(()=>[e(n,{type:"primary",plain:""},{default:a(()=>[e(i,null,{default:a(()=>[e(p)]),_:1}),j]),_:1})]),_:2},1032,["href"]),e(n,{type:"success",plain:"",prop:"is_sticky",onClick:y=>w(r.row.id,r.row.is_sticky,r.$index,r.row)},{default:a(()=>[e(i,null,{default:a(()=>[e(v)]),_:1}),d(" "+V(r.row.is_sticky?"\u9876\u7F6E":"\u666E\u901A"),1)]),_:2},1032,["onClick"])]),_:2},1024),e(n,{type:"danger",plain:"",onClick:y=>E(r.row.id,r.$index)},{default:a(()=>[e(i,null,{default:a(()=>[e(T)]),_:1}),q]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})}}};export{le as default};
