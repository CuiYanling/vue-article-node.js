import{ba as oe,ag as M,af as le,n as D,y as X,ad as ie,H as ee,aB as ce,a as g,j as R,aC as ue,b6 as I,P as F,o as N,W as O,w as te,Q as fe,R as de,i as W,U as P,e as b,a3 as A,aF as me,a4 as j,a9 as ae,c as ne,d as U,T as ve,s as he,m as L,aG as Y,K as V,J as pe,L as K,ac as ge,r as ye,N as be,O as Se,V as we,X as Te,S as Ee,aa as ze,ab as ke,bb as xe}from"./index.1bb11c7d.js";var He=/\s/;function _e(e){for(var t=e.length;t--&&He.test(e.charAt(t)););return t}var Ce=/^\s+/;function Be(e){return e&&e.slice(0,_e(e)+1).replace(Ce,"")}var G=0/0,Le=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Pe=/^0o[0-7]+$/i,Re=parseInt;function q(e){if(typeof e=="number")return e;if(oe(e))return G;if(M(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=M(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Be(e);var l=Ne.test(e);return l||Pe.test(e)?Re(e.slice(2),l?2:8):Le.test(e)?G:+e}var $e=function(){return le.Date.now()};const $=$e;var Me="Expected a function",Ie=Math.max,Oe=Math.min;function Qe(e,t,l){var n,f,d,s,u,r,v=0,y=!1,p=!1,o=!0;if(typeof e!="function")throw new TypeError(Me);t=q(t)||0,M(l)&&(y=!!l.leading,p="maxWait"in l,d=p?Ie(q(l.maxWait)||0,t):d,o="trailing"in l?!!l.trailing:o);function S(i){var c=n,m=f;return n=f=void 0,v=i,s=e.apply(m,c),s}function w(i){return v=i,u=setTimeout(E,t),y?S(i):s}function B(i){var c=i-r,m=i-v,h=t-c;return p?Oe(h,d-m):h}function x(i){var c=i-r,m=i-v;return r===void 0||c>=t||c<0||p&&m>=d}function E(){var i=$();if(x(i))return H(i);u=setTimeout(E,B(i))}function H(i){return u=void 0,o&&n?S(i):(n=f=void 0,s)}function _(){u!==void 0&&clearTimeout(u),v=0,n=r=f=u=void 0}function T(){return u===void 0?s:H($())}function a(){var i=$(),c=x(i);if(n=arguments,f=this,r=i,c){if(u===void 0)return w(r);if(p)return clearTimeout(u),u=setTimeout(E,t),S(r)}return u===void 0&&(u=setTimeout(E,t)),s}return a.cancel=_,a.flush=T,a}const se=Symbol("scrollbarContextKey"),C=4,We={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ae=({move:e,size:t,bar:l})=>({[l.size]:t,transform:`translate${l.axis}(${e}%)`}),De=D({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Xe=X({__name:"thumb",props:De,setup(e){const t=e,l="Thumb",n=ie(se),f=ee("scrollbar");n||ce(l,"can not inject scrollbar context");const d=g(),s=g(),u=g({}),r=g(!1);let v=!1,y=!1,p=ae?document.onselectstart:null;const o=R(()=>We[t.vertical?"vertical":"horizontal"]),S=R(()=>Ae({size:t.size,move:t.move,bar:o.value})),w=R(()=>d.value[o.value.offset]**2/n.wrapElement[o.value.scrollSize]/t.ratio/s.value[o.value.offset]),B=c=>{var m;if(c.stopPropagation(),c.ctrlKey||[1,2].includes(c.button))return;(m=window.getSelection())==null||m.removeAllRanges(),E(c);const h=c.currentTarget;!h||(u.value[o.value.axis]=h[o.value.offset]-(c[o.value.client]-h.getBoundingClientRect()[o.value.direction]))},x=c=>{if(!s.value||!d.value||!n.wrapElement)return;const m=Math.abs(c.target.getBoundingClientRect()[o.value.direction]-c[o.value.client]),h=s.value[o.value.offset]/2,z=(m-h)*100*w.value/d.value[o.value.offset];n.wrapElement[o.value.scroll]=z*n.wrapElement[o.value.scrollSize]/100},E=c=>{c.stopImmediatePropagation(),v=!0,document.addEventListener("mousemove",H),document.addEventListener("mouseup",_),p=document.onselectstart,document.onselectstart=()=>!1},H=c=>{if(!d.value||!s.value||v===!1)return;const m=u.value[o.value.axis];if(!m)return;const h=(d.value.getBoundingClientRect()[o.value.direction]-c[o.value.client])*-1,z=s.value[o.value.offset]-m,re=(h-z)*100*w.value/d.value[o.value.offset];n.wrapElement[o.value.scroll]=re*n.wrapElement[o.value.scrollSize]/100},_=()=>{v=!1,u.value[o.value.axis]=0,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",_),i(),y&&(r.value=!1)},T=()=>{y=!1,r.value=!!t.size},a=()=>{y=!0,r.value=v};ue(()=>{i(),document.removeEventListener("mouseup",_)});const i=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return I(F(n,"scrollbarElement"),"mousemove",T),I(F(n,"scrollbarElement"),"mouseleave",a),(c,m)=>(N(),O(me,{name:b(f).b("fade"),persisted:""},{default:te(()=>[fe(W("div",{ref_key:"instance",ref:d,class:P([b(f).e("bar"),b(f).is(b(o).key)]),onMousedown:x},[W("div",{ref_key:"thumb",ref:s,class:P(b(f).e("thumb")),style:A(b(S)),onMousedown:B},null,38)],34),[[de,c.always||r.value]])]),_:1},8,["name"]))}});var J=j(Xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const je=D({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Fe=X({__name:"bar",props:je,setup(e,{expose:t}){const l=e,n=g(0),f=g(0);return t({handleScroll:s=>{if(s){const u=s.offsetHeight-C,r=s.offsetWidth-C;f.value=s.scrollTop*100/u*l.ratioY,n.value=s.scrollLeft*100/r*l.ratioX}}}),(s,u)=>(N(),ne(ve,null,[U(J,{move:n.value,ratio:s.ratioX,size:s.width,always:s.always},null,8,["move","ratio","size","always"]),U(J,{move:f.value,ratio:s.ratioY,size:s.height,vertical:"",always:s.always},null,8,["move","ratio","size","always"])],64))}});var Ue=j(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ye=D({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:he([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ve={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(L)},Ke={name:"ElScrollbar"},Ge=X({...Ke,props:Ye,emits:Ve,setup(e,{expose:t,emit:l}){const n=e,f=ee("scrollbar");let d,s;const u=g(),r=g(),v=g(),y=g("0"),p=g("0"),o=g(),S=g(1),w=g(1),B=R(()=>{const a={};return n.height&&(a.height=Y(n.height)),n.maxHeight&&(a.maxHeight=Y(n.maxHeight)),[n.wrapStyle,a]}),x=()=>{var a;r.value&&((a=o.value)==null||a.handleScroll(r.value),l("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function E(a,i){ze(a)?r.value.scrollTo(a):L(a)&&L(i)&&r.value.scrollTo(a,i)}const H=a=>{!L(a)||(r.value.scrollTop=a)},_=a=>{!L(a)||(r.value.scrollLeft=a)},T=()=>{if(!r.value)return;const a=r.value.offsetHeight-C,i=r.value.offsetWidth-C,c=a**2/r.value.scrollHeight,m=i**2/r.value.scrollWidth,h=Math.max(c,n.minSize),z=Math.max(m,n.minSize);S.value=c/(a-c)/(h/(a-h)),w.value=m/(i-m)/(z/(i-z)),p.value=h+C<a?`${h}px`:"",y.value=z+C<i?`${z}px`:""};return V(()=>n.noresize,a=>{a?(d==null||d(),s==null||s()):({stop:d}=pe(v,T),s=I("resize",T))},{immediate:!0}),V(()=>[n.maxHeight,n.height],()=>{n.native||K(()=>{var a;T(),r.value&&((a=o.value)==null||a.handleScroll(r.value))})}),ge(se,ye({scrollbarElement:u,wrapElement:r})),be(()=>{n.native||K(()=>{T()})}),Se(()=>T()),t({wrap$:r,update:T,scrollTo:E,setScrollTop:H,setScrollLeft:_,handleScroll:x}),(a,i)=>(N(),ne("div",{ref_key:"scrollbar$",ref:u,class:P(b(f).b())},[W("div",{ref_key:"wrap$",ref:r,class:P([a.wrapClass,b(f).e("wrap"),{[b(f).em("wrap","hidden-default")]:!a.native}]),style:A(b(B)),onScroll:x},[(N(),O(Te(a.tag),{ref_key:"resize$",ref:v,class:P([b(f).e("view"),a.viewClass]),style:A(a.viewStyle)},{default:te(()=>[we(a.$slots,"default")]),_:3},8,["class","style"]))],38),a.native?Ee("v-if",!0):(N(),O(Ue,{key:0,ref_key:"barRef",ref:o,height:p.value,width:y.value,always:a.always,"ratio-x":w.value,"ratio-y":S.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var qe=j(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ze=ke(qe),k=new Map;let Q;ae&&(document.addEventListener("mousedown",e=>Q=e),document.addEventListener("mouseup",e=>{for(const t of k.values())for(const{documentHandler:l}of t)l(e,Q)}));function Z(e,t){let l=[];return Array.isArray(t.arg)?l=t.arg:xe(t.arg)&&l.push(t.arg),function(n,f){const d=t.instance.popperRef,s=n.target,u=f==null?void 0:f.target,r=!t||!t.instance,v=!s||!u,y=e.contains(s)||e.contains(u),p=e===s,o=l.length&&l.some(w=>w==null?void 0:w.contains(s))||l.length&&l.includes(u),S=d&&(d.contains(s)||d.contains(u));r||v||y||p||o||S||t.value(n,f)}}const et={beforeMount(e,t){k.has(e)||k.set(e,[]),k.get(e).push({documentHandler:Z(e,t),bindingFn:t.value})},updated(e,t){k.has(e)||k.set(e,[]);const l=k.get(e),n=l.findIndex(d=>d.bindingFn===t.oldValue),f={documentHandler:Z(e,t),bindingFn:t.value};n>=0?l.splice(n,1,f):l.push(f)},unmounted(e){k.delete(e)}};export{et as C,Ze as E,Qe as d};
