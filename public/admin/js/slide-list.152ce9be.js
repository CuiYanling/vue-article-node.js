(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["slide-list"],{"1fab":function(e,t,r){"use strict";var a=r("fb8f"),i=r.n(a);i.a},"99af":function(e,t,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("d039"),o=r("e8b5"),l=r("861d"),s=r("7b0b"),c=r("07fa"),u=r("8418"),d=r("65f0"),f=r("1dde"),m=r("b622"),p=r("2d00"),b=m("isConcatSpreadable"),g=9007199254740991,_="Maximum allowed index exceeded",h=i.TypeError,v=p>=51||!n((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),w=f("concat"),k=function(e){if(!l(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},x=!v||!w;a({target:"Array",proto:!0,forced:x},{concat:function(e){var t,r,a,i,n,o=s(this),l=d(o,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?o:arguments[t],k(n)){if(i=c(n),f+i>g)throw h(_);for(r=0;r<i;r++,f++)r in n&&u(l,f,n[r])}else{if(f>=g)throw h(_);u(l,f++,n)}return l.length=f,l}})},a434:function(e,t,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("23cb"),o=r("5926"),l=r("07fa"),s=r("7b0b"),c=r("65f0"),u=r("8418"),d=r("1dde"),f=d("splice"),m=i.TypeError,p=Math.max,b=Math.min,g=9007199254740991,_="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,a,i,d,f,h,v=s(this),w=l(v),k=n(e,w),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=w-k):(r=x-2,a=b(p(o(t),0),w-k)),w+r-a>g)throw m(_);for(i=c(v,a),d=0;d<a;d++)f=k+d,f in v&&u(i,d,v[f]);if(i.length=a,r<a){for(d=k;d<w-a;d++)f=d+a,h=d+r,f in v?v[h]=v[f]:delete v[h];for(d=w;d>w-a+r;d--)delete v[d-1]}else if(r>a)for(d=w-a;d>k;d--)f=d+a-1,h=d+r-1,f in v?v[h]=v[f]:delete v[h];for(d=0;d<r;d++)v[d+k]=arguments[d+2];return v.length=w-a+r,i}})},bfe4:function(e,t,r){},e186:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("轮播图管理")]),r("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.insert_dialog_visible=!0}}},[e._v(" 添加轮播 ")])],1),r("el-table",{attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"#",width:"40"}}),r("el-table-column",{attrs:{prop:"title",label:"链接标题"}}),r("el-table-column",{attrs:{prop:"picture",label:"轮播图片",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"150px"},attrs:{src:e.row.picture,fit:"cover"}})]}}])}),r("el-table-column",{attrs:{prop:"url",label:"跳转地址",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{href:t.row.url,target:"_blank"}},[r("span",{staticClass:"am-text-xs"},[e._v(e._s(t.row.url))])])]}}])}),r("el-table-column",{attrs:{prop:"target",label:"跳转方式"}}),r("el-table-column",{attrs:{prop:"slide_order",label:"排序数字"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.usable?"success":"info"}},[e._v(" "+e._s(1===t.row.usable?"启用":"禁用")+" ")])]}}])}),r("el-table-column",{attrs:{prop:"create_time",label:"添加日期",width:"90"}}),r("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{icon:"el-icon-edit",type:"primary",plain:""},on:{click:function(r){return e.openEditDialog(t.row)}}},[e._v(" 编辑 ")]),r("el-button",{attrs:{icon:"el-icon-switch-button",type:1===t.row.usable?"info":"success",plain:""},on:{click:function(r){return e.handleSwitch(t.row)}}},[e._v(" "+e._s(1===t.row.usable?"禁用":"启用")+" ")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:""},on:{click:function(r){return e.handleRemove(t.row.id,t.$index)}}},[e._v("删除 ")])]}}])})],1),r("el-dialog",{attrs:{title:"添加轮播图",visible:e.insert_dialog_visible},on:{"update:visible":function(t){e.insert_dialog_visible=t},close:function(t){return e.handleDialogClose("insert_form")}}},[r("el-form",{ref:"insert_form",attrs:{model:e.insert_form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"轮播图片",prop:"picture"}},[r("single-upload",{attrs:{"upload-action":"/upload/common/","remove-action":"/upload/remove/",data:{type:"common"}},model:{value:e.insert_form.picture,callback:function(t){e.$set(e.insert_form,"picture",t)},expression:"insert_form.picture"}})],1),r("el-form-item",{attrs:{label:"标题文字",prop:"title"}},[r("el-input",{attrs:{placeholder:"文字将作为标题，显示在图片上"},model:{value:e.insert_form.title,callback:function(t){e.$set(e.insert_form,"title",t)},expression:"insert_form.title"}})],1),r("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[r("el-input",{attrs:{placeholder:"请输入完整的链接地址"},model:{value:e.insert_form.url,callback:function(t){e.$set(e.insert_form,"url",t)},expression:"insert_form.url"}})],1),r("el-form-item",{attrs:{label:"跳转方式",prop:"target"}},[r("el-radio",{attrs:{label:"_blank"},model:{value:e.insert_form.target,callback:function(t){e.$set(e.insert_form,"target",t)},expression:"insert_form.target"}},[e._v("新窗口跳转")]),r("el-radio",{attrs:{label:"_self"},model:{value:e.insert_form.target,callback:function(t){e.$set(e.insert_form,"target",t)},expression:"insert_form.target"}},[e._v("本窗口跳转")])],1),r("el-form-item",{attrs:{label:"显示排序",prop:"slide_order"}},[r("el-input",{attrs:{placeholder:"请输入数字，数字越小，排序越靠前"},model:{value:e.insert_form.slide_order,callback:function(t){e.$set(e.insert_form,"slide_order",t)},expression:"insert_form.slide_order"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.insert_dialog_visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("添 加")])],1)],1),r("el-dialog",{attrs:{title:"编辑轮播图",visible:e.edit_dialog_visible},on:{"update:visible":function(t){e.edit_dialog_visible=t},close:function(t){return e.handleDialogClose("edit_form")}}},[r("el-form",{ref:"edit_form",attrs:{model:e.edit_form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"轮播图片",prop:"picture"}},[r("single-upload",{attrs:{"upload-action":"/upload/common/","remove-action":"/upload/remove/",data:{type:"common"}},model:{value:e.edit_form.picture,callback:function(t){e.$set(e.edit_form,"picture",t)},expression:"edit_form.picture"}})],1),r("el-form-item",{attrs:{label:"标题文字",prop:"title"}},[r("el-input",{attrs:{placeholder:"文字将作为标题，显示在图片上"},model:{value:e.edit_form.title,callback:function(t){e.$set(e.edit_form,"title",t)},expression:"edit_form.title"}})],1),r("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[r("el-input",{attrs:{placeholder:"请输入完整的链接地址"},model:{value:e.edit_form.url,callback:function(t){e.$set(e.edit_form,"url",t)},expression:"edit_form.url"}})],1),r("el-form-item",{attrs:{label:"跳转方式",prop:"target"}},[r("el-radio",{attrs:{label:"_blank"},model:{value:e.edit_form.target,callback:function(t){e.$set(e.edit_form,"target",t)},expression:"edit_form.target"}},[e._v("新窗口跳转")]),r("el-radio",{attrs:{label:"_self"},model:{value:e.edit_form.target,callback:function(t){e.$set(e.edit_form,"target",t)},expression:"edit_form.target"}},[e._v("本窗口跳转")])],1),r("el-form-item",{attrs:{label:"显示排序",prop:"slide_order"}},[r("el-input",{attrs:{placeholder:"请输入数字，数字越小，排序越靠前"},model:{value:e.edit_form.slide_order,callback:function(t){e.$set(e.edit_form,"slide_order",t)},expression:"edit_form.slide_order"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.edit_dialog_visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保 存")])],1)],1)],1)},i=[],n=(r("a434"),r("5530")),o=(r("96cf"),r("1da1")),l=r("e359"),s=r("365c"),c={name:"List",components:{SingleUpload:l["a"]},data:function(){return{tableData:[],insert_dialog_visible:!1,insert_form:{picture:"",title:"",url:"http://",target:"_blank",slide_order:""},edit_dialog_visible:!1,current_slide:"",edit_form:{id:"",picture:"",title:"",url:"",target:"_blank",slide_order:""},rules:{picture:[{required:!0,message:"请上传一张轮播图片",trigger:"change"}],title:[{message:"请填写标题文字",trigger:"blur"}],url:[{type:"url",required:!0,message:"请填写完整的链接地址",trigger:"blur"}],target:[{required:!0,message:"请选择一种跳转方式",trigger:"blur"},{type:"enum",enum:["_blank","_self"],message:"请选择合格跳转方式",trigger:"blur"}],slide_order:[{required:!0,message:"请填写显示顺序！",trigger:"blur"},{pattern:/^\d+$/,message:"顺序必须是数字组成！",trigger:"blur"}]}}},created:function(){document.title="轮播图管理",this.loadList()},methods:{loadList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["i"].list();case 2:r=t.sent,a=r.status,r.msg,i=r.data,a&&(e.tableData=i);case 7:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;this.$refs.insert_form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,s["i"].insert(e.insert_form);case 3:a=t.sent,i=a.status,o=a.msg,l=a.data,i?(e.tableData.push(Object(n["a"])({},e.insert_form,{},l)),e.tableData.sort((function(e,t){return e.slide_order-t.slide_order})),e.insert_dialog_visible=!1,e.$message.success(o)):e.$message.error(o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},openEditDialog:function(e){this.current_slide=e,this.edit_form=Object(n["a"])({},e),this.edit_dialog_visible=!0},handleEdit:function(){var e=this;this.$refs.edit_form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,s["i"].edit(e.edit_form);case 3:a=t.sent,i=a.status,n=a.msg,a.data,i?(Object.assign(e.current_slide,e.edit_form),e.edit_dialog_visible=!1,e.$message.success(n)):e.$message.error(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleRemove:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$confirm("此操作将永久删除该轮播图, 是否继续?",{type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s["i"].remove({id:e});case 2:i=a.sent,n=i.status,o=i.msg,n&&(r.tableData.splice(t,1),r.$message.success(o));case 6:case"end":return a.stop()}}),a)})))).catch((function(){r.$message.info("取消成功")}));case 1:case"end":return a.stop()}}),a)})))()},handleSwitch:function(e){var t=this,r=e.id,a=e.usable;this.$confirm("此操作将".concat(1===a?"禁用":"启用","该轮播图，是否继续？"),{type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function i(){var n,o,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s["i"].toggle({id:r,usable:-a});case 2:n=i.sent,o=n.status,l=n.msg,o&&(Object.assign(e,{usable:-a}),t.$message.success(l));case 6:case"end":return i.stop()}}),i)})))).catch((function(){t.$message.info("取消成功")}))},handleDialogClose:function(e){this.$refs[e].resetFields()}}},u=c,d=(r("f550"),r("2877")),f=Object(d["a"])(u,a,i,!1,null,"80269a7c",null);t["default"]=f.exports},e359:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadAction,"before-upload":e.handleBeforeUpload,data:e.data,headers:e.headers,"on-error":e.handleUploadError,"on-success":e.handleUploadSuccess,"show-file-list":!1}},[e.value?[r("div",{staticClass:"cover",on:{click:function(t){return t.stopPropagation(),e.handleRemove.apply(null,arguments)}}},[r("i",{staticClass:"el-icon-delete avatar-uploader-icon"})]),r("img",{staticClass:"avatar",attrs:{src:e.value}})]:r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],2)},i=[],n=(r("99af"),r("caad"),r("2532"),r("96cf"),r("1da1")),o=r("bc3a"),l=r.n(o),s={name:"single-upload",props:{value:{type:String,default:""},defaultImage:{type:String},uploadAction:{type:String,required:!0},removeAction:{type:String,required:!0},data:{type:Object,default:function(){return{type:"common"}}},headers:{type:Object,default:function(){return{Authorization:"Bearer ".concat(sessionStorage.token)}}}},methods:{handleBeforeUpload:function(e){var t=/^image\/(jpe?g|png)$/,r=t.test(e.type),a=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&a},handleUploadSuccess:function(e,t){this.$emit("success",e),this.$emit("input",e.src)},handleUploadError:function(e,t,r){var a=e.status,i=e.message;switch(a){case 401:this.$message.error("错误:401,Token失效,请重新登录!");break;case 400:i=JSON.parse(i),this.$message.error("错误:400,".concat(i));break;default:this.$message.error("错误:".concat(a,",").concat(i,"!"));break}},handleRemove:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.value.includes(e.defaultImage),r){t.next=7;break}return t.next=4,l.a.post(e.removeAction,{src:e.value});case 4:a=t.sent,i=a.status,i&&e.$message.success("删除成功!");case 7:e.$emit("input","");case 8:case"end":return t.stop()}}),t)})))()}}},c=s,u=(r("1fab"),r("2877")),d=Object(u["a"])(c,a,i,!1,null,null,null);t["a"]=d.exports},f550:function(e,t,r){"use strict";var a=r("bfe4"),i=r.n(a);i.a},fb8f:function(e,t,r){}}]);
//# sourceMappingURL=slide-list.152ce9be.js.map