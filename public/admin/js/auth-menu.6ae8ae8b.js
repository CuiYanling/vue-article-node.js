(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auth-menu"],{4230:function(e,t,n){},b0c0:function(e,t,n){var r=n("83ab"),a=n("5e77").EXISTS,o=n("e330"),i=n("9bf2").f,s=Function.prototype,c=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(l.exec),u="name";r&&!a&&i(s,u,{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(e){return""}}})},b1fb:function(e,t,n){"use strict";var r=n("4230"),a=n.n(r);a.a},caba:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("菜单权限")])]),n("el-alert",{attrs:{title:"Tips",type:"warning",description:"设置后台管理系统的左侧菜单，目前至多支持两层菜单，三层以上菜单将不会显示。","show-icon":"",closable:!1}}),n("el-tree",{ref:"tree",staticClass:"am-margin-top-lg",attrs:{load:e.loadNode,lazy:"","highlight-current":"","default-expanded-keys":e.default_expanded_keys,"node-key":"id",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,a=t.data;return n("div",{staticClass:"node-box"},[n("div",{staticClass:"node-name"},[e._v(" "+e._s(r.label)+" ")]),n("div",{staticClass:"node-action"},[n("el-popover",{staticClass:"am-margin-right-sm",attrs:{placement:"left",trigger:"hover"}},[a.icon_name?n("i",{staticClass:"am-text-xxl",class:"el-icon-"+a.icon_name}):n("div",{staticClass:"am-text-xxl"},[e._v("无")]),n("el-button",{attrs:{slot:"reference",type:"text",icon:a.icon_name?"el-icon-"+a.icon_name:"",disabled:1===a.id},on:{click:function(t){return t.stopPropagation(),e.openIconModal(r,a)}},slot:"reference"},[e._v("图标 ")])],1),n("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline",disabled:1===a.id},on:{click:function(t){return t.stopPropagation(),e.openEditModal(r,a)}}},[e._v("编辑 ")]),n("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.openAddModal(r,a)}}},[e._v(" 添加 ")]),n("el-button",{attrs:{type:"text",icon:"el-icon-delete",disabled:1===a.id},on:{click:function(t){return t.stopPropagation(),e.openRemoveModal(r,a)}}},[e._v("删除 ")]),n("div",{staticClass:"node-order am-margin-left-sm"},[e._v(" 显示序号： "),n("el-tag",{attrs:{size:"mini"}},[e._v(e._s(a.menu_order))])],1)],1)])}}])}),n("el-dialog",{attrs:{title:"编辑节点",visible:e.edit_modal_visible},on:{"update:visible":function(t){e.edit_modal_visible=t},closed:function(t){return e.handleClosedDialog("editForm")}}},[n("el-form",{ref:"editForm",attrs:{model:e.edit_form,rules:e.rules,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),n("el-form-item",{attrs:{label:"组件名称"}},[n("el-input",{attrs:{placeholder:"指定此菜单对应的组件名称"},model:{value:e.edit_form.component,callback:function(t){e.$set(e.edit_form,"component",t)},expression:"edit_form.component"}})],1),n("el-form-item",{attrs:{label:"链接地址"}},[n("el-input",{attrs:{placeholder:"指定此菜单的链接地址，选填"},model:{value:e.edit_form.path,callback:function(t){e.$set(e.edit_form,"path",t)},expression:"edit_form.path"}})],1),n("el-form-item",{attrs:{label:"显示顺序",prop:"menu_order"}},[n("el-input",{attrs:{placeholder:"显示顺序按照数字从小到大，如2001"},model:{value:e.edit_form.menu_order,callback:function(t){e.$set(e.edit_form,"menu_order",t)},expression:"edit_form.menu_order"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.edit_modal_visible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleEditMenu}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"选择图标",width:"72%",visible:e.icon_modal_visible},on:{"update:visible":function(t){e.icon_modal_visible=t}}},[n("ul",{staticClass:"icon-list"},e._l(e.icons,(function(t){return n("li",{key:t.id,class:{checked:t.checked},on:{click:function(n){return e.handleCheckIcon(t)}}},[n("span",[n("i",{class:"el-icon-"+t.name}),n("span",{staticClass:"icon-name"},[e._v("el-icon-"+e._s(t.name))])])])})),0),n("el-pagination",{attrs:{background:"",layout:"->,prev, pager, next","page-size":e.page_size,total:e.icon_total},on:{"current-change":e.handlePageChange}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.icon_modal_visible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateIcon}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"添加节点",visible:e.insert_modal_visible},on:{"update:visible":function(t){e.insert_modal_visible=t},closed:function(t){return e.handleClosedDialog("addForm")}}},[n("el-form",{ref:"addForm",attrs:{model:e.insert_form,rules:e.rules,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{model:{value:e.insert_form.name,callback:function(t){e.$set(e.insert_form,"name",t)},expression:"insert_form.name"}})],1),n("el-form-item",{attrs:{label:"组件名称"}},[n("el-input",{attrs:{placeholder:"指定此菜单对应的组件名称"},model:{value:e.insert_form.component,callback:function(t){e.$set(e.insert_form,"component",t)},expression:"insert_form.component"}})],1),n("el-form-item",{attrs:{label:"链接地址"}},[n("el-input",{attrs:{placeholder:"指定此菜单的链接地址，选填"},model:{value:e.insert_form.path,callback:function(t){e.$set(e.insert_form,"path",t)},expression:"insert_form.path"}})],1),n("el-form-item",{attrs:{label:"显示顺序",prop:"menu_order"}},[n("el-input",{attrs:{placeholder:"显示顺序按照数字从小到大，如2001"},model:{value:e.insert_form.menu_order,callback:function(t){e.$set(e.insert_form,"menu_order",t)},expression:"insert_form.menu_order"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.insert_modal_visible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddMenu}},[e._v("确 定")])],1)],1)],1)],1)},a=[],o=(n("4160"),n("b0c0"),n("159b"),n("5530")),i=(n("96cf"),n("1da1")),s=n("365c"),c={name:"Menu",data:function(){return{defaultProps:{label:"name"},icon_modal_visible:!1,icons:[],page_size:30,icon_total:0,checked_icon:{icon_id:"",icon_name:""},current_node:"",current_node_data:"",default_expanded_keys:[1],edit_modal_visible:!1,edit_form:{id:"",name:"",pId:"",component:"",path:"",menu_order:"",icon:"",icon_id:""},insert_modal_visible:!1,insert_form:{name:"",pId:"",component:"",path:"",menu_order:"",icon:"",icon_id:""},rules:{name:[{required:!0,type:"string",message:"请输入菜单名称！",trigger:"blur"}],menu_order:[{required:!0,type:"string",message:"请填写显示顺序！",trigger:"blur"},{pattern:/^\d+$/,message:"顺序必须是数字组成！",trigger:"blur"}]}}},created:function(){this.loadIcons(1),document.title="菜单权限"},methods:{loadNode:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==e.level){n.next=6;break}return n.next=3,s["f"].submenu({pId:0});case 3:return r=n.sent,a=r.data,n.abrupt("return",t(a));case 6:return n.next=8,s["f"].submenu({pId:e.data.id});case 8:o=n.sent,i=o.data,t(i);case 11:case"end":return n.stop()}}),n)})))()},loadIcons:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s["e"].list({pageSize:t.page_size,pageIndex:e});case 2:r=n.sent,a=r.status,o=r.icons,i=r.total,a&&(o.forEach((function(e){e.checked=!1})),t.icons=o,t.icon_total=i);case 7:case"end":return n.stop()}}),n)})))()},handlePageChange:function(e){this.loadIcons(e)},openIconModal:function(e,t){this.icon_modal_visible=!0,this.current_node_data=t},handleCheckIcon:function(e){this.icons.forEach((function(t){t.checked=t===e&&!e.checked})),this.checked_icon.icon_id=e.checked?e.id:"",this.checked_icon.icon_name=e.checked?e.name:""},handleUpdateIcon:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.current_node_data.id,t.next=3,s["f"].setIcon(n,Object(o["a"])({},e.checked_icon));case 3:r=t.sent,a=r.status,i=r.msg,a&&(e.$message.success(i),e.icon_modal_visible=!1,e.current_node_data.icon_name=e.checked_icon.icon_name);case 7:case"end":return t.stop()}}),t)})))()},openRemoveModal:function(e,t){var n=this;this.$confirm("此操作将永久删除该菜单, 是否继续?",{type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.setDefaultExpandedKeys(),r.next=3,s["f"].remove(t.id);case 3:a=r.sent,o=a.status,i=a.msg,o?(e.remove(),n.$message.success(i)):n.$message.error(i);case 7:case"end":return r.stop()}}),r)})))).catch((function(){n.$message.info("已取消删除")}))},openAddModal:function(e,t){this.insert_form.pId=t.id,this.insert_modal_visible=!0,this.current_node_data=t},handleAddMenu:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r,a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=15;break}return e.setDefaultExpandedKeys(),t.next=4,s["f"].insert(Object(o["a"])({},e.insert_form));case 4:if(r=t.sent,a=r.status,i=r.msg,c=r.data,a){t.next=11;break}return e.$message.error(i),t.abrupt("return",!1);case 11:e.$refs.tree.append(Object(o["a"])({},e.insert_form,{},c),e.current_node_data),e.insert_form={name:"",pId:"",path:""},e.$message.success(i),e.insert_modal_visible=!1;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},openEditModal:function(e,t){this.edit_modal_visible=!0,this.edit_form=Object(o["a"])({},t),this.current_node=e},handleEditMenu:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.current_node.data.id,e.$refs.editForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=12;break}return t.next=3,s["f"].update(n,Object(o["a"])({},e.edit_form));case 3:if(a=t.sent,i=a.status,c=a.msg,i){t.next=9;break}return e.$message.error(c),t.abrupt("return",!1);case 9:e.current_node.data=Object(o["a"])({},e.edit_form),e.$message.success(c),e.edit_modal_visible=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},handleClosedDialog:function(e){this.$refs[e].resetFields()},setDefaultExpandedKeys:function(){var e=this.$refs.tree.store._getAllNodes(),t=[];e.forEach((function(e){e.expanded&&t.push(e.data.id)})),this.default_expanded_keys=t}}},l=c,d=(n("b1fb"),n("2877")),u=Object(d["a"])(l,r,a,!1,null,"0bdf5088",null);t["default"]=u.exports}}]);
//# sourceMappingURL=auth-menu.6ae8ae8b.js.map